<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Audio de G√™nesis 1</title>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 2rem; 
      max-width: 800px; 
      margin: auto; 
      line-height: 1.6;
    }
    h1 {
      text-align: center; 
      color: #2c3e50; 
      margin-bottom: 1.5rem;
      font-size: 2.2rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    .verse { 
      background: #fff; 
      border-radius: 12px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
      padding: 1.5rem; 
      margin-bottom: 1.8rem; 
      transition: transform 0.3s ease;
    }
    .verse:hover {
      transform: translateY(-3px);
    }
    .word { 
      transition: all 0.3s ease; 
      cursor: pointer; 
      padding: 2px 4px;
      border-radius: 3px;
    }
    .word:hover {
      background-color: #f0f7ff;
    }
    .highlight { 
      color: #e74c3c; 
      font-weight: bold; 
      background-color: #fff4f2;
      padding: 2px 4px;
      border-radius: 3px;
    }
    .controls button { 
      margin-right: 0.7rem; 
      margin-top: 0.7rem; 
      padding: 0.6rem 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    .global-controls { 
      text-align: center; 
      margin-bottom: 2rem; 
      background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
      padding: 1.2rem; 
      border-radius: 12px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
      position: sticky; 
      top: 15px; 
      z-index: 999; 
    }
    .global-controls button { 
      color: white; 
      margin: 0 0.7rem; 
      padding: 0.8rem 1.5rem; 
      border: none; 
      border-radius: 8px; 
      cursor: pointer; 
      font-size: 1rem;
      font-weight: 600;
      box-shadow: 0 3px 6px rgba(0,0,0,0.16);
      transition: all 0.3s ease;
    }
    #playAllEN { 
      background: linear-gradient(to right, #8e44ad 0%, #9b59b6 100%);
    }
    #playAllPT { 
      background: linear-gradient(to right, #27ae60 0%, #2ecc71 100%);
    }
    #stopAll { 
      background: linear-gradient(to right, #e74c3c 0%, #c0392b 100%);
    }
    .global-controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 12px rgba(0,0,0,0.2);
    }
    .repeat-active { 
      background-color: #ffb74d !important; 
      color: #000 !important; 
    }
    .ref-title { 
      font-size: 1.1rem; 
      color: #8e44ad; 
      margin-top: 0;
      margin-bottom: 1rem;
      font-weight: 600;
      border-bottom: 2px solid #f0f0f0;
      padding-bottom: 0.5rem;
    }
    .bold-paragraph { 
      font-weight: bold; 
      color: #2c3e50;
    }
    .language-toggle {
      background-color: #3498db !important;
      color: white !important;
    }
    .play-button {
      background-color: #2ecc71 !important;
      color: white !important;
    }
    .pause-button {
      background-color: #f39c12 !important;
      color: white !important;
    }
    .repeat-button {
      background-color: #9b59b6 !important;
      color: white !important;
    }
    footer {
      text-align: center;
      margin-top: 2rem;
      color: #7f8c8d;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <h1>
    üìñ G√™nesis 1 ‚Äî Ingl√™s e Portugu√™s
  </h1>

  <div class="global-controls">
    <button id="playAllEN">‚ñ∂Ô∏è Ouvir Tudo (EN)</button>
    <button id="playAllPT">‚ñ∂Ô∏è Ouvir Tudo (PT)</button>
    <button id="stopAll">‚èπÔ∏è Parar Tudo</button>
  </div>

  <div id="container"></div>

  <footer>
    <p>Desenvolvido para estudo das Escrituras ‚Ä¢ Todos os direitos reservados</p>
  </footer>

  <script>
    const verses = [
      {
        "ref": "G√™nesis 1:1",
        "enText": "In the beginning God created the heavens and the earth.",
        "ptText": "No princ√≠pio, Deus criou os c√©us e a terra.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:1",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:1"
      },
      {
        "ref": "G√™nesis 1:2",
        "enText": "Now the earth was formless and empty, darkness was over the surface of the deep, and the Spirit of God was hovering over the waters.",
        "ptText": "E a terra era sem forma e vazia; trevas cobriam a face do abismo, e o Esp√≠rito de Deus se movia sobre a face das √°guas.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:2",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:2"
      },
      {
        "ref": "G√™nesis 1:3",
        "enText": "And God said, Let there be light: and there was light.",
        "ptText": "Disse Deus: Haja luz; e houve luz.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:3",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:3"
      },
      {
        "ref": "G√™nesis 1:4",
        "enText": "God saw that the light was good, and he separated the light from the darkness.",
        "ptText": "E viu Deus que a luz era boa; e fez separa√ß√£o entre a luz e as trevas.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:4",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:4"
      },
      {
        "ref": "G√™nesis 1:5",
        "enText": "God called the light day, and the darkness he called night. And there was evening, and there was morning‚Äîthe first day.",
        "ptText": "E Deus chamou √† luz Dia; e √†s trevas chamou Noite. E foi a tarde e a manh√£, o dia primeiro.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:5",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:5"
      },
      {
        "ref": "G√™nesis 1:6",
        "enText": "And God said, Let there be a vault between the waters to separate water from water.",
        "ptText": "E disse Deus: Haja um firmamento no meio das √°guas, e haja separa√ß√£o entre √°guas e √°guas.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:6",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:6"
      },
      {
        "ref": "G√™nesis 1:7",
        "enText": "So God made the vault and separated the water under the vault from the water above it. And it was so.",
        "ptText": "E fez Deus o firmamento, e fez separa√ß√£o entre as √°guas que estavam debaixo do firmamento e as √°guas que estavam sobre o firmamento; e assim foi.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:7",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:7"
      },
      {
        "ref": "G√™nesis 1:8",
        "enText": "God called the vault sky. And there was evening, and there was morning‚Äîthe second day.",
        "ptText": "E chamou Deus ao firmamento C√©us; e foi a tarde e a manh√£, o dia segundo.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:8",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:8"
      },
      {
        "ref": "G√™nesis 1:9",
        "enText": "And God said, Let the water under the sky be gathered to one place, and let dry ground appear. And it was so.",
        "ptText": "E disse Deus: Ajuntem-se as √°guas debaixo dos c√©us num lugar; e apare√ßa a por√ß√£o seca; e assim foi.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:9",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:9"
      },
      {
        "ref": "G√™nesis 1:10",
        "enText": "God called the dry ground land, and the gathered waters he called seas. And God saw that it was good.",
        "ptText": "E chamou Deus √† por√ß√£o seca Terra; e ao ajuntamento das √°guas chamou Mares; e viu Deus que era bom.",
        "enFile": "https://www.wordproject.org/bibles/audio/01_english/b01.mp3#1:10",
        "ptFile": "https://www.wordproject.org/bibles/audio/02_portuguese/b01.mp3#1:10"
      }
    ];

    const container = document.getElementById("container");
    let currentAudio = null;
    let rafId = null;
    let resolveNext = null;
    let isPlayingAll = false;
    let isGlobalPlayAll = false;
    let currentPlayingIndex = -1;
    let currentPlayingLang = '';
    let currentPlayAllLang = null;
    const repeatState = {};

    function renderTextWithSpans(text) {
      return text.split(" ").map(w => `<span class="word">${w}</span>`).join(" ");
    }

    verses.forEach((v, i) => {
      const div = document.createElement("div");
      div.className = "verse";
      div.innerHTML = `
        <h2 class="ref-title">${v.ref}</h2>
        <p id="en-${i}">${renderTextWithSpans(v.enText)}</p>
        <div class="controls">
          <button class="language-toggle" onclick="toggleTranslation(${i})">üåê Mostrar Tradu√ß√£o</button>
          <button class="repeat-button" id="repeat-toggle-${i}-en" onclick="toggleRepeat(${i}, 'en', this)">üîÅ Repetir</button>
          <button class="play-button" id="toggle-en-${i}" onclick="togglePlayPause(${i}, 'en', this)">‚ñ∂Ô∏è Ingl√™s</button>
        </div>
        <div id="pt-wrapper-${i}" style="display:none;">
          <p id="pt-${i}">${renderTextWithSpans(v.ptText)}</p>
          <div class="controls">
            <button class="repeat-button" id="repeat-toggle-${i}-pt" onclick="toggleRepeat(${i}, 'pt', this)">üîÅ Repetir</button>
            <button class="play-button" id="toggle-pt-${i}" onclick="togglePlayPause(${i}, 'pt', this)">‚ñ∂Ô∏è Portugu√™s</button>
          </div>
        </div>
        <audio id="audio-en-${i}" src="${v.enFile}"></audio>
        <audio id="audio-pt-${i}" src="${v.ptFile}"></audio>
      `;
      container.appendChild(div);
    });

    function toggleRepeat(index, lang, btn) {
      const key = `${lang}-${index}`;
      repeatState[key] = !repeatState[key];
      btn.classList.toggle('repeat-active', repeatState[key]);
      btn.textContent = repeatState[key] ? 'üîÅ Repetindo' : 'üîÅ Repetir';
    }

    function togglePlayPause(index, lang, btn) {
      // üö® Bloqueia se estamos no Play All - CORRE√á√ÉO: S√≥ mostra alerta se estiver em modo Play All
      if (isGlobalPlayAll && (currentPlayingIndex !== index || currentPlayingLang !== lang)) {
        Swal.fire({
          icon: 'info',
          title: 'Aten√ß√£o',
          text: 'Voc√™ est√° em Play All. Se quiser ouvir um vers√≠culo individual, primeiro clique em Stop.',
          confirmButtonText: 'OK'
        });
        return;
      }

      const audio = document.getElementById(`audio-${lang}-${index}`);
      const paragraph = document.getElementById(`${lang}-${index}`);
      const words = paragraph.querySelectorAll(".word");

      if (!audio.paused) {
        audio.pause();
        btn.textContent = lang === 'en' ? "‚ñ∂Ô∏è Ingl√™s" : "‚ñ∂Ô∏è Portugu√™s";
        btn.classList.remove('pause-button');
        btn.classList.add('play-button');
        paragraph.classList.remove("bold-paragraph");
        cancelAnimationFrame(rafId);
        
        // Se estava tocando como parte do Play All, avan√ßa para o pr√≥ximo
        if (isGlobalPlayAll && resolveNext) {
          resolveNext();
        }
        return;
      }

      words.forEach((word, wi) => {
        word.onclick = () => {
          if (audio.duration > 0) {
            audio.currentTime = (wi / words.length) * audio.duration;
            if (audio.paused) audio.play();
          }
        };
      });

      audio.play();
      btn.textContent = lang === 'en' ? "‚è∏Ô∏è Ingl√™s" : "‚è∏Ô∏è Portugu√™s";
      btn.classList.remove('play-button');
      btn.classList.add('pause-button');
      paragraph.classList.add("bold-paragraph");
      syncWords(audio, words);

      audio.onended = () => {
        const key = `${lang}-${index}`;
        if (repeatState[key]) {
          audio.currentTime = 0;
          audio.play();
          return;
        }
        cancelAnimationFrame(rafId);
        words.forEach(w => w.classList.remove("highlight"));
        paragraph.classList.remove("bold-paragraph");
        btn.textContent = lang === 'en' ? "‚ñ∂Ô∏è Ingl√™s" : "‚ñ∂Ô∏è Portugu√™s";
        btn.classList.remove('pause-button');
        btn.classList.add('play-button');
        
        // Se estava tocando como parte do Play All, avan√ßa para o pr√≥ximo
        if (isGlobalPlayAll && resolveNext) {
          resolveNext();
        }
      };

      currentAudio = audio;
      currentPlayingIndex = index;
      currentPlayingLang = lang;
    }

    function stopAllAudio() {
      verses.forEach((_, i) => {
        // Ingl√™s
        document.getElementById(`audio-en-${i}`).pause();
        document.getElementById(`audio-en-${i}`).currentTime = 0;
        document.getElementById(`toggle-en-${i}`).textContent = "‚ñ∂Ô∏è Ingl√™s";
        document.getElementById(`toggle-en-${i}`).classList.remove('pause-button');
        document.getElementById(`toggle-en-${i}`).classList.add('play-button');
        document.getElementById(`en-${i}`).classList.remove("bold-paragraph");

        // Portugu√™s
        document.getElementById(`audio-pt-${i}`).pause();
        document.getElementById(`audio-pt-${i}`).currentTime = 0;
        document.getElementById(`toggle-pt-${i}`).textContent = "‚ñ∂Ô∏è Portugu√™s";
        document.getElementById(`toggle-pt-${i}`).classList.remove('pause-button');
        document.getElementById(`toggle-pt-${i}`).classList.add('play-button');
        document.getElementById(`pt-${i}`).classList.remove("bold-paragraph");
      });

      cancelAnimationFrame(rafId);
      isPlayingAll = false;
      isGlobalPlayAll = false;
      currentPlayAllLang = null;
      document.getElementById("playAllEN").disabled = false;
      document.getElementById("playAllPT").disabled = false;
    }

    function toggleTranslation(index) {
      const wrapper = document.getElementById(`pt-wrapper-${index}`);
      const btn = document.querySelector(`button[onclick="toggleTranslation(${index})"]`);
      
      if (wrapper.style.display === "none") {
        wrapper.style.display = "block";
        btn.textContent = "üåê Ocultar Tradu√ß√£o";
      } else {
        wrapper.style.display = "none";
        btn.textContent = "üåê Mostrar Tradu√ß√£o";
      }
    }

    function syncWords(audio, words) {
      function step() {
        if (!audio.paused && audio.duration > 0) {
          const progress = audio.currentTime / audio.duration;
          const wordIndex = Math.floor(progress * words.length);
          words.forEach((w, i) => w.classList.toggle("highlight", i === wordIndex));
        }
        rafId = requestAnimationFrame(step);
      }
      step();
    }

    document.getElementById("playAllEN").addEventListener("click", async () => {
      if (isGlobalPlayAll) {
        stopAllAudio();
        return;
      }
      
      stopAllAudio();
      isPlayingAll = true;
      isGlobalPlayAll = true;
      currentPlayAllLang = "en";
      document.getElementById("playAllEN").textContent = "‚è∏Ô∏è Pausar Tudo (EN)";
      document.getElementById("playAllPT").disabled = true;

      for (let i = 0; i < verses.length; i++) {
        if (currentPlayAllLang !== "en") break;
        
        await new Promise(resolve => {
          resolveNext = resolve;
          setTimeout(() => {
            togglePlayPause(i, 'en', document.getElementById(`toggle-en-${i}`));
          }, 100);
        });
      }
      stopAllAudio();
      document.getElementById("playAllEN").textContent = "‚ñ∂Ô∏è Ouvir Tudo (EN)";
    });

    document.getElementById("playAllPT").addEventListener("click", async () => {
      if (isGlobalPlayAll) {
        stopAllAudio();
        return;
      }
      
      stopAllAudio();
      isPlayingAll = true;
      isGlobalPlayAll = true;
      currentPlayAllLang = "pt";
      document.getElementById("playAllPT").textContent = "‚è∏Ô∏è Pausar Tudo (PT)";
      document.getElementById("playAllEN").disabled = true;

      // Mostra todas as tradu√ß√µes em portugu√™s
      verses.forEach((_, i) => {
        document.getElementById(`pt-wrapper-${i}`).style.display = "block";
        document.querySelector(`button[onclick="toggleTranslation(${i})"]`).textContent = "üåê Ocultar Tradu√ß√£o";
      });

      for (let i = 0; i < verses.length; i++) {
        if (currentPlayAllLang !== "pt") break;
        
        await new Promise(resolve => {
          resolveNext = resolve;
          setTimeout(() => {
            togglePlayPause(i, 'pt', document.getElementById(`toggle-pt-${i}`));
          }, 100);
        });
      }
      stopAllAudio();
      document.getElementById("playAllPT").textContent = "‚ñ∂Ô∏è Ouvir Tudo (PT)";
      
      // Esconde as tradu√ß√µes
      verses.forEach((_, i) => {
        document.getElementById(`pt-wrapper-${i}`).style.display = "none";
        document.querySelector(`button[onclick="toggleTranslation(${i})"]`).textContent = "üåê Mostrar Tradu√ß√£o";
      });
    });

    document.getElementById("stopAll").addEventListener("click", stopAllAudio);
  </script>
</body>
</html>
